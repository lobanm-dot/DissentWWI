<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WWI Homefront: Civil Liberties Station</title>
    
    <!-- React & Tailwind Setup -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --paper-color: #f4e4bc;
            --ink-color: #2c241b;
            --red-stamp: #b91c1c;
        }
        body {
            margin: 0;
            padding: 0;
            background-color: #1a1510;
            color: var(--ink-color);
            font-family: 'Courier Prime', monospace;
        }
        
        .font-courier { font-family: 'Courier Prime', monospace; }
        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-cinzel { font-family: 'Cinzel', serif; }
        
        /* Patterns */
        .bg-wood {
            background-color: #3e2723;
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h40v40H0V0zm20 20h20v20H20V20zM0 20h20v20H0V20z' fill='%23281914' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .vintage-paper {
            background-color: #f4e4bc;
            background-image: repeating-linear-gradient(to right, transparent 0 100%, #e6d5ac 100% 101%);
            box-shadow: inset 0 0 60px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.5);
        }

        .paper-texture {
            background-color: #fffdf0;
            background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%239C92AC' fill-opacity='0.1' fill-rule='evenodd'%3E%3Cpath d='M5 0h1v6H5V0zM0 5h6v1H0V5z'/%3E%3C/g%3E%3C/svg%3E");
        }

        /* Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 36px;
            width: 36px;
            border-radius: 50%;
            background: #b91c1c;
            border: 4px solid #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
            cursor: pointer;
            margin-top: -14px;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            background: #444;
            border-radius: 4px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
        }

        /* Animations */
        .stamp-animation {
            animation: stamp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            opacity: 0;
            transform: scale(2) rotate(-15deg);
        }
        
        @keyframes stamp {
            to { opacity: 1; transform: scale(1) rotate(-15deg); }
        }

        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .term-card {
            transition: all 0.2s;
            cursor: pointer;
        }
        .term-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .term-selected {
            background-color: #fee2e2;
            border-color: #b91c1c;
            transform: scale(1.02);
        }
        .term-matched {
            background-color: #dcfce7;
            border-color: #15803d;
            color: #14532d;
            cursor: default;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Case Data ---
        const scenarios = [
            {
                id: 1,
                title: "Eugene V. Debs",
                subTitle: "The Canton Speech",
                img: "Case1.png",
                resultImg: "Verdict1.png",
                context: "Eugene V. Debs, a five-time presidential candidate for the Socialist Party, traveled to Canton, Ohio to visit three fellow socialists in prison. He delivered a fiery speech to a crowd of 1,200 in a public park. In it, he carefully avoided directly inciting violence, but heavily criticized the U.S. government, the draft, and the war as a capitalist venture, famously stating the 'master class' declares wars while the 'subject class' fights them.",
                charges: "Charged with 10 counts of violating the Espionage Act for 'attempting to cause insubordination in the military' and 'obstructing recruitment'.",
                prosecution: "He is obstructing recruitment! He told the crowd they are 'fit for something better than cannon fodder.' This discourages young men from enlisting. He is a danger to our military success. Words that might be harmless in peace become dangerous sparks in a powder keg during war.",
                defense: "He never explicitly told anyone to break the law. He is critiquing capitalism and war in general. The First Amendment protects political dissent, especially during wartime when we need it most. To silence a man for his political philosophy is to dismantle the very democracy we claim to be fighting for.",
                historicalRuling: "Illegal",
                outcome: "Guilty. Sentenced to 10 years in prison.",
                reasoning: "The Supreme Court upheld the conviction. They argued his words had the 'natural tendency' to obstruct the draft.",
                libertyImpact: -15
            },
            {
                id: 2,
                title: "The Hofer Brothers",
                subTitle: "The Hutterite Martyrs",
                img: "Case2.png",
                resultImg: "Verdict2.png",
                context: "Joseph and Michael Hofer were Hutterites, a Christian sect living in communal colonies in South Dakota who believe in absolute pacifism. When drafted, they reported to camp but refused to wear military uniforms, pick up weapons, or even perform non-combat work, believing any support of the 'war machine' violated Jesus's teachings. Their refusal was seen not just as religious devotion, but as defiance of federal law.",
                charges: "Court-martialed for 'disobeying lawful orders' from a superior officer under the Articles of War.",
                prosecution: "A soldier cannot choose which orders to follow. Refusing to wear the uniform is insubordination. If we allow this, discipline in the entire army crumbles. Every exemption weakens our line. They enjoy the protection of our flag but refuse to defend it.",
                defense: "These men are not spies; they are religious pacifists. They have lived in America for peace. Forcing them to violate their conscience and religion is tyranny, not defense. They are willing to farm or help, but they cannot wear the uniform of death.",
                historicalRuling: "Illegal",
                outcome: "Guilty. Sent to Alcatraz. Two brothers died from mistreatment.",
                reasoning: "The military viewed conscientious objection as a crime equivalent to desertion or sedition during the war crisis.",
                libertyImpact: -25
            },
            {
                id: 3,
                title: "Emma Goldman",
                subTitle: "No Conscription League",
                img: "Case3.png",
                resultImg: "Verdict3.png",
                context: "Emma Goldman, a fierce anarchist, launched the 'No Conscription League' to oppose the draft, which she called a violation of the 13th Amendment's ban on involuntary servitude. At massive rallies in New York, she stopped short of telling men to dodge the draft directly, but handed out manifestos arguing that conscription was 'the cemetery of liberty' and that citizens had a moral right to resist.",
                charges: "Charged with 'conspiracy to induce persons not to register' for the draft under the Selective Service Act.",
                prosecution: "She is organizing a conspiracy to induce men not to register! She calls the draft 'state tyranny.' This is a direct attempt to sabotage the Selective Service Act. She is not debating; she is actively counseling young men to commit a crime against their country.",
                defense: "She is expressing an opinion on a law. She believes the draft violates the 13th Amendment (involuntary servitude). This is protected political speech, not a physical blockade. If we cannot debate the legality of a law, we are subjects, not citizens.",
                historicalRuling: "Illegal",
                outcome: "Guilty. Sentenced to 2 years, fined $10,000, and deported.",
                reasoning: "The court ruled that organizing to counsel others to break the law is not protected speech.",
                libertyImpact: -20
            },
            {
                id: 4,
                title: "Charles Schenck",
                subTitle: "The Pamphleteer",
                img: "Case4.png",
                resultImg: "Verdict4.png",
                context: "Charles Schenck was the General Secretary of the Socialist Party in Philadelphia. To protest the draft, he printed 15,000 leaflets titled 'Long Live the Constitution of the United States.' These were mailed directly to men who had just been drafted. The pamphlets didn't call for violence, but urged men to 'assert your rights' and resist the 'intimidation' of the draft board, comparing a conscript to a convict.",
                charges: "Charged with 'conspiracy to violate the Espionage Act' by causing insubordination in the military and obstructing recruitment.",
                prosecution: "He targeted draftees specifically! This isn't just a speech; it's an attempt to cause insubordination in the military. It creates a 'Clear and Present Danger'. You cannot falsely shout fire in a crowded theater; you cannot shout rebellion in a recruited army.",
                defense: "The pamphlet only urged peaceful resistance and repeal of the act. It quoted the Constitution! If we can't quote the Constitution during war, do we have a Constitution? He is petitioning the government for redress of grievances, a fundamental right.",
                historicalRuling: "Illegal",
                outcome: "Guilty. Conviction upheld by Supreme Court (9-0).",
                reasoning: "Justice Holmes created the 'Clear and Present Danger' test. Free speech does not protect a man falsely shouting fire in a theater.",
                libertyImpact: -20
            },
            {
                id: 5,
                title: "Robert Goldstein",
                subTitle: "The Spirit of '76",
                img: "Case5.png",
                resultImg: "Verdict5.png",
                context: "Robert Goldstein produced a lavish silent film, 'The Spirit of '76', depicting the American Revolution. The movie included historically accurate but violent scenes of British soldiers bayoneting women and children during the Wyoming Valley Massacre. However, because the U.S. had just entered WWI as an *ally* of Britain, federal agents seized the film. They argued that showing British atrocities—even from 140 years ago—would incite hatred against an ally.",
                charges: "Charged with violating the Espionage Act for 'attempting to cause insubordination, mutiny, and refusal of duty' in the military.",
                prosecution: "This film sows discord! The British are now our allies. Showing them as villains will make Americans hate them and help the Germans. It is enemy propaganda disguised as history. It is calculated to make us fight our friends instead of our enemies.",
                defense: "It's a historical movie about 1776! It depicts actual events. We cannot censor history just because our alliances have changed. This is art, not treason. The truth of the American Revolution does not change because of European politics today.",
                historicalRuling: "Illegal",
                outcome: "Guilty. Sentenced to 10 years in federal prison.",
                reasoning: "The court ruled the film was 'calculated to foment disloyalty' and aid the German enemy by dividing the Allies.",
                libertyImpact: -30
            }
        ];

        // --- Vocabulary Data ---
        const vocabTerms = [
            { term: "Obstruct", id: "obstruct" },
            { term: "Disloyal", id: "disloyal" },
            { term: "Abusive", id: "abusive" }
        ];

        const vocabDefinitions = [
            { id: "abusive", text: "Extremely offensive, insulting, or harmful language." },
            { id: "obstruct", text: "To intentionally block, stop, or delay an action (like recruitment)." },
            { id: "disloyal", text: "Unfaithful to one's government; showing a lack of allegiance." }
        ];

        function App() {
            const [phase, setPhase] = useState('newspaper'); 
            const [currentScenarioIndex, setCurrentScenarioIndex] = useState(0);
            const [libertyMeter, setLibertyMeter] = useState(100);
            const [score, setScore] = useState(0);
            const [sliderValue, setSliderValue] = useState(50);
            const [selectedTerm, setSelectedTerm] = useState(null);
            const [matchedPairs, setMatchedPairs] = useState([]); 
            const [finalReflection, setFinalReflection] = useState("");
            const [userFreedomLost, setUserFreedomLost] = useState(50);
            
            const currentScenario = scenarios[currentScenarioIndex];

            // --- Actions ---
            const handleTermClick = (id) => {
                if (matchedPairs.includes(id)) return;
                setSelectedTerm(id);
            };

            const handleDefClick = (id) => {
                if (matchedPairs.includes(id)) return;
                if (selectedTerm === id) {
                    setMatchedPairs([...matchedPairs, id]);
                    setSelectedTerm(null);
                } else {
                    setSelectedTerm(null);
                }
            };

            const submitVerdict = () => {
                // Play Gavel Sound
                const gavelSound = new Audio('Gavel.mp3');
                gavelSound.play().catch(err => console.error("Audio playback failed:", err));
                
                setPhase('result');
            };

            const calculateResult = () => {
                const isGuiltyVerdict = sliderValue > 50;
                const isHistoricallyIllegal = currentScenario.historicalRuling === "Illegal";
                
                let points = 0;
                if (isGuiltyVerdict && isHistoricallyIllegal) points = 1;
                if (!isGuiltyVerdict && !isHistoricallyIllegal) points = 1; 
                
                return { isGuiltyVerdict, isHistoricallyIllegal, points };
            };

            const handleNextCase = () => {
                const { isGuiltyVerdict, isHistoricallyIllegal, points } = calculateResult();
                
                setScore(s => s + points);
                if (isGuiltyVerdict) {
                    setLibertyMeter(prev => Math.max(0, prev + currentScenario.libertyImpact));
                }

                if (currentScenarioIndex < scenarios.length - 1) {
                    setCurrentScenarioIndex(prev => prev + 1);
                    setSliderValue(50); 
                    setPhase('game');
                } else {
                    setPhase('levelup');
                }
            };

            // --- Component Renders ---
            
            const Newspaper = () => (
                <div className="min-h-screen p-4 md:p-8 newspaper-container flex items-center justify-center bg-wood">
                    <div className="max-w-4xl w-full bg-[#fffdf0] text-black shadow-2xl p-6 md:p-12 border-t-8 border-black">
                        <div className="text-center border-b-4 border-double border-black pb-4 mb-6">
                            <div className="text-xs font-bold uppercase tracking-[0.5em] mb-2 text-stone-600">May 16, 1918 • Late Edition • Price 2 Cents</div>
                            <h1 className="font-playfair text-6xl md:text-8xl font-black uppercase leading-none mb-2">The War Gazette</h1>
                            <div className="w-full h-1 bg-black mb-1"></div>
                            <div className="w-full h-0.5 bg-black"></div>
                        </div>

                        <div className="text-center mb-8">
                            <h2 className="font-playfair text-5xl md:text-6xl font-black uppercase leading-tight mb-2">Sedition Act Signed!</h2>
                            <h3 className="font-serif text-2xl italic text-stone-700">Criticism of Government Now Punishable by 20 Years in Prison</h3>
                        </div>

                        <div className="grid md:grid-cols-3 gap-8">
                            <div className="md:col-span-2">
                                <div className="text-lg leading-relaxed font-serif mb-6 text-justify">
                                    <p className="mb-4">
                                        Washington D.C. — In a move to protect the war effort, Congress has passed two sweeping laws. 
                                        The <strong className="font-sans">Espionage Act (1917)</strong> makes it a crime to willfully <span className="font-bold underline decoration-red-800">obstruct</span> military recruitment.
                                    </p>
                                    <p>
                                        The new <strong className="font-sans">Sedition Act (1918)</strong> goes further, forbidding any <span className="font-bold underline decoration-red-800">disloyal</span>, profane, scurrilous, or <span className="font-bold underline decoration-red-800">abusive</span> language about the United States government, its flag, or its armed forces.
                                    </p>
                                </div>

                                <div className="bg-red-50 border border-red-200 p-6 rounded-sm">
                                    <h4 className="font-bold text-red-900 uppercase tracking-wider text-sm mb-4 border-b border-red-200 pb-2">Judicial Qualification Task</h4>
                                    <p className="text-sm text-red-800 mb-4">
                                        Prove you can interpret the law. Match the term on the left to its correct legal definition on the right.
                                    </p>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <h5 className="font-bold text-xs uppercase text-stone-500 mb-2">Legal Term</h5>
                                        <h5 className="font-bold text-xs uppercase text-stone-500 mb-2">Definition</h5>
                                        
                                        {vocabTerms.map((termItem, index) => {
                                            const defItem = vocabDefinitions[index];
                                            return (
                                                <React.Fragment key={termItem.id}>
                                                    <div 
                                                        onClick={() => handleTermClick(termItem.id)}
                                                        className={`p-3 border-2 rounded text-sm font-bold text-center flex items-center justify-center h-full cursor-pointer
                                                            ${matchedPairs.includes(termItem.id) ? 'term-matched' : 'term-card bg-white border-stone-300'}
                                                            ${selectedTerm === termItem.id ? 'term-selected' : ''}
                                                        `}
                                                    >
                                                        {termItem.term} {matchedPairs.includes(termItem.id) && "✓"}
                                                    </div>

                                                    <div 
                                                        onClick={() => handleDefClick(defItem.id)}
                                                        className={`p-3 border-2 rounded text-xs leading-tight flex items-center h-full cursor-pointer
                                                            ${matchedPairs.includes(defItem.id) ? 'term-matched' : 'term-card bg-white border-stone-300'}
                                                        `}
                                                    >
                                                        {defItem.text}
                                                    </div>
                                                </React.Fragment>
                                            );
                                        })}
                                    </div>
                                </div>

                                {matchedPairs.length === 3 ? (
                                    <div className="animate-fade-in mt-8 text-center">
                                        <p className="font-bold text-green-800 mb-2">✓ QUALIFICATION COMPLETE</p>
                                        <button 
                                            onClick={() => setPhase('intro')}
                                            className="bg-black text-white text-xl font-bold px-8 py-4 uppercase hover:bg-stone-800 transition shadow-lg w-full font-cinzel"
                                        >
                                            Take Judicial Oath & Begin &rarr;
                                        </button>
                                    </div>
                                ) : (
                                    <div className="mt-8 text-center text-stone-400 font-bold italic text-sm">
                                        Match all 3 terms to proceed...
                                    </div>
                                )}
                            </div>

                            <div className="md:col-span-1 border-l-2 border-stone-300 pl-8 hidden md:block">
                                <div className="mb-6">
                                    <h4 className="font-sans font-bold uppercase border-b-2 border-black mb-2">The Justification</h4>
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Thomas_Watt_Gregory_1913.jpg/480px-Thomas_Watt_Gregory_1913.jpg" className="w-full grayscale mb-2 sepia opacity-80" alt="Attorney General" />
                                    <p className="text-xs text-stone-500 mb-2">Attorney General Thomas Gregory</p>
                                    <blockquote className="font-serif italic text-lg leading-tight">
                                        "May God have mercy on them, for they need expect none from an outraged people and an <span className="font-bold">avenging government</span>."
                                    </blockquote>
                                </div>
                                <div className="bg-stone-200 p-4 text-center mt-8">
                                    <h5 className="font-bold uppercase text-sm mb-2">Liberty Bonds</h5>
                                    <div className="text-4xl font-black mb-1">100%</div>
                                    <div className="text-xs">Americanism Required</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const Intro = () => {
                const handleEnter = () => {
                    const audio = new Audio('Allrise.mp3');
                    audio.play().catch(err => console.error("Audio playback failed:", err));
                    setPhase('game');
                };

                return (
                    <div className="flex flex-col items-center justify-center min-h-screen text-center p-8 bg-wood font-courier text-stone-900 animate-fade-in">
                        <div className="vintage-paper p-12 max-w-2xl transform rotate-1 rounded-sm shadow-2xl relative">
                            <div className="absolute top-4 right-4 border-4 border-double border-red-900 text-red-900 font-black p-2 transform rotate-12 opacity-80">
                                TOP SECRET
                            </div>
                            <h1 className="font-playfair text-4xl mb-4 text-stone-800 uppercase tracking-widest border-b-4 border-black pb-2">Judicial Orders</h1>
                            <div className="mb-6">
                                <span className="bg-black text-white px-3 py-1 text-sm font-bold uppercase">Authorized Personnel Only</span>
                            </div>
                            <p className="text-lg leading-relaxed mb-6 text-left font-serif">
                                You have reviewed the Sedition Act. As a newly appointed Federal Judge, your duty is to enforce these laws without hesitation.
                            </p>
                            <p className="italic text-base mb-8 text-stone-600 bg-stone-100 p-4 border-l-4 border-stone-400">
                                "Listen to the arguments. Weigh the security of the nation against the liberty of the individual."
                            </p>
                            <button 
                                onClick={handleEnter}
                                className="bg-red-900 text-amber-50 px-8 py-3 text-xl font-bold uppercase hover:bg-red-800 transition shadow-lg border-2 border-black cursor-pointer font-cinzel"
                            >
                                Enter the Courtroom
                            </button>
                        </div>
                    </div>
                );
            };

            const Meter = () => (
                <div className="fixed top-0 right-0 z-20 w-64 vintage-paper p-3 border-b-2 border-l-2 border-black shadow-xl hidden md:block font-courier opacity-90">
                    <div className="flex justify-between text-[10px] font-bold uppercase mb-1">
                        <span>Totalitarianism</span>
                        <span>Anarchy</span>
                    </div>
                    <div className="text-center font-bold text-sm mb-1 font-playfair">NATIONAL LIBERTY METER</div>
                    <div className="w-full bg-stone-300 h-4 border border-black relative">
                        <div 
                            className={`h-full transition-all duration-1000 ${libertyMeter > 50 ? 'bg-blue-800' : 'bg-red-800'}`} 
                            style={{ width: `${libertyMeter}%` }}
                        ></div>
                    </div>
                    <div className="text-xs text-center mt-1 text-stone-600">{libertyMeter}% Civil Liberties Remaining</div>
                </div>
            );

            const GameScreen = () => {
                const getSentence = (val) => {
                    if (val <= 50) return "PROTECTED SPEECH - SET FREE";
                    if (val <= 62) return "GUILTY - PROBATION & FINE";
                    if (val <= 75) return "GUILTY - 2 YEARS PRISON";
                    if (val <= 87) return "GUILTY - 5 YEARS PRISON";
                    return "GUILTY - EXTREME 10 YEARS PRISON";
                };

                const sentenceText = getSentence(sliderValue);

                return (
                    <div className="min-h-screen flex flex-col items-center justify-center py-6 px-4 bg-wood font-courier text-stone-900">
                        <Meter />
                        
                        <div className="vintage-paper max-w-6xl w-full p-6 md:p-8 relative shadow-2xl flex flex-col gap-6">
                            
                            {/* Header Section */}
                            <div className="flex justify-between items-end border-b-4 border-black pb-2">
                                <div>
                                    <h4 className="text-xs uppercase tracking-[0.3em] text-stone-500 font-bold mb-1">United States District Court</h4>
                                    <h2 className="text-4xl font-playfair font-black uppercase">{currentScenario.title}</h2>
                                </div>
                                <div className="text-right">
                                    <div className="text-sm font-bold text-stone-400">CASE NO. 1918-{currentScenario.id}</div>
                                    <div className="font-serif italic text-lg">{currentScenario.subTitle}</div>
                                </div>
                            </div>

                            {/* Top Section: Context & Charges */}
                            <div className="grid md:grid-cols-3 gap-6 bg-stone-100/50 p-4 border border-stone-300">
                                <div className="md:col-span-2">
                                    <h3 className="font-bold uppercase text-xs tracking-widest text-stone-500 mb-2 border-b border-stone-300 pb-1">Case Context</h3>
                                    <p className="font-serif text-lg leading-relaxed text-justify">{currentScenario.context}</p>
                                </div>
                                <div className="md:col-span-1 bg-red-50 p-4 border-2 border-red-100 relative overflow-hidden">
                                    <div className="absolute -right-4 -top-4 opacity-10 text-red-900 transform rotate-12">
                                        <svg width="100" height="100" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                                    </div>
                                    <h3 className="font-bold uppercase text-xs tracking-widest text-red-900 mb-2 border-b border-red-200 pb-1">Official Charges</h3>
                                    <p className="font-bold text-red-900 text-sm leading-snug">{currentScenario.charges}</p>
                                </div>
                            </div>

                            {/* Middle Section: Visual & Arguments */}
                            <div className="grid md:grid-cols-5 gap-8">
                                {/* Visual (Left - 2 Cols) */}
                                <div className="md:col-span-2 flex flex-col items-center">
                                    <div className="bg-white p-3 shadow-lg transform -rotate-1 border border-stone-200 w-full">
                                        <div className="aspect-[3/4] overflow-hidden bg-stone-200 relative mb-2">
                                            <img 
                                                src={currentScenario.img} 
                                                alt={currentScenario.title} 
                                                className="w-full h-full object-cover filter sepia contrast-125"
                                            />
                                            <div className="absolute inset-0 shadow-inner pointer-events-none"></div>
                                        </div>
                                        <div className="text-center font-handwriting text-stone-500 text-sm italic">Exhibit A: The Defendant</div>
                                    </div>
                                </div>

                                {/* Arguments (Right - 3 Cols) */}
                                <div className="md:col-span-3 flex flex-col gap-4">
                                    {/* Prosecution */}
                                    <div className="bg-white p-5 border-l-8 border-stone-800 shadow-sm relative">
                                        <h3 className="font-cinzel font-bold text-stone-900 mb-2 text-lg border-b border-stone-200 pb-1 flex justify-between">
                                            <span>PROSECUTION</span>
                                            <span className="text-xs font-sans font-normal text-stone-400 mt-1">THE UNITED STATES</span>
                                        </h3>
                                        <p className="font-serif text-lg leading-relaxed italic text-stone-800">
                                            "{currentScenario.prosecution}"
                                        </p>
                                    </div>

                                    {/* Defense */}
                                    <div className="bg-white p-5 border-l-8 border-blue-800 shadow-sm relative mt-2">
                                        <h3 className="font-playfair font-bold text-blue-900 mb-2 text-lg border-b border-blue-100 pb-1 flex justify-between">
                                            <span>DEFENSE</span>
                                            <span className="text-xs font-sans font-normal text-stone-400 mt-1">COUNSEL FOR DEFENDANT</span>
                                        </h3>
                                        <p className="font-serif text-lg leading-relaxed italic text-stone-800">
                                            "{currentScenario.defense}"
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* Bottom Section: The Verdict Scale */}
                            <div className="mt-4 pt-6 border-t-2 border-black">
                                <div className="bg-stone-800 p-6 rounded-lg shadow-inner text-white relative">
                                    <div className="flex justify-between text-xs font-bold uppercase tracking-widest mb-4 text-stone-400">
                                        <span>Protected Speech (Set Free)</span>
                                        <span>Extreme 10 Years Prison</span>
                                    </div>
                                    
                                    <div className="relative h-12 flex items-center mb-6">
                                        <input 
                                            type="range" 
                                            min="0" 
                                            max="100" 
                                            value={sliderValue} 
                                            onChange={(e) => setSliderValue(e.target.value)}
                                            className="w-full z-10 opacity-0 absolute h-full cursor-pointer" 
                                        />
                                        <div className="w-full h-4 bg-gradient-to-r from-blue-900 via-stone-500 to-red-900 rounded-full relative overflow-hidden">
                                            <div className="absolute left-1/2 top-0 bottom-0 w-0.5 bg-white opacity-50"></div>
                                        </div>
                                        
                                        {/* Custom Thumb Visual */}
                                        <div 
                                            className="absolute h-10 w-10 bg-stone-200 border-4 border-stone-400 rounded-full shadow-xl flex items-center justify-center text-stone-800 font-bold pointer-events-none transition-all duration-75"
                                            style={{ left: `calc(${sliderValue}% - 20px)` }}
                                        >
                                            <div className="w-2 h-2 bg-black rounded-full"></div>
                                        </div>
                                    </div>

                                    <div className="text-center">
                                        <div className="mb-4 text-xl font-playfair font-bold">
                                            SENTENCING: <span className={sliderValue > 50 ? "text-red-400" : "text-blue-300"}>
                                                {sentenceText}
                                            </span>
                                        </div>
                                        <button 
                                            onClick={submitVerdict}
                                            className="bg-amber-100 text-stone-900 px-8 py-3 font-cinzel font-bold text-lg uppercase tracking-wider hover:bg-white transition shadow-lg border-2 border-stone-900"
                                        >
                                            Deliver Judgment &rarr;
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                );
            };

            const ResultScreen = () => {
                const { isGuiltyVerdict, isHistoricallyIllegal, points } = calculateResult();
                const userAgreesWithHistory = (isGuiltyVerdict && isHistoricallyIllegal) || (!isGuiltyVerdict && !isHistoricallyIllegal);

                return (
                    <div className="min-h-screen flex items-center justify-center p-4 bg-wood font-courier text-stone-900">
                        <div className="vintage-paper max-w-3xl w-full p-8 md:p-12 relative shadow-2xl animate-fade-in flex flex-col gap-6 text-center border-4 border-double border-stone-800">
                            
                            <h2 className="text-xs font-bold uppercase tracking-[0.4em] text-stone-500">Historical Record</h2>

                            {/* New Image Section with Overlapping Stamp */}
                            <div className="relative my-4 border-4 border-stone-800 p-2 bg-stone-200 transform rotate-1 shadow-xl max-w-md mx-auto">
                                <img 
                                    src={currentScenario.resultImg} 
                                    alt="Historical Sentencing" 
                                    className="w-full h-80 object-cover sepia filter contrast-125"
                                    onError={(e) => {
                                        e.target.onerror = null;
                                        e.target.src = "https://via.placeholder.com/400x300?text=Add+Sentencing+Image+Here";
                                    }}
                                />
                                
                                {/* Stamp Moved Here */}
                                <div className={`stamp-animation absolute -bottom-6 -right-6 border-4 ${isHistoricallyIllegal ? "border-red-800 text-red-800" : "border-green-800 text-green-800"} px-4 py-2 text-2xl font-black uppercase tracking-widest opacity-0 bg-stone-100/90 shadow-lg transform -rotate-12`} style={{animationDelay: '0.5s', zIndex: 20}}>
                                    {isHistoricallyIllegal ? "SEDITION" : "PROTECTED"}
                                </div>

                                <div className="text-center font-handwriting text-xs text-stone-600 mt-2 bg-white p-1 border border-stone-300">
                                    Fig {currentScenario.id}: Sentencing Documentation
                                </div>
                            </div>
                            
                            <div className="relative py-2">
                                <h1 className="text-5xl md:text-6xl font-playfair font-black text-stone-900 mb-2">
                                    {isHistoricallyIllegal ? "GUILTY" : "NOT GUILTY"}
                                </h1>
                            </div>

                            <div className="bg-stone-100 p-6 border-l-4 border-stone-800 text-left font-serif text-lg shadow-inner">
                                <p className="mb-4"><strong className="uppercase text-xs tracking-wider block text-stone-500 mb-1">Historical Outcome</strong> {currentScenario.outcome}</p>
                                <p><strong className="uppercase text-xs tracking-wider block text-stone-500 mb-1">Legal Reasoning</strong> {currentScenario.reasoning}</p>
                            </div>

                            <div className="grid grid-cols-2 gap-4 text-center py-4 border-t border-b border-stone-300">
                                <div>
                                    <div className="text-xs uppercase text-stone-500 font-bold">Your Verdict</div>
                                    <div className={`font-bold text-lg ${isGuiltyVerdict ? "text-red-700" : "text-blue-700"}`}>
                                        {isGuiltyVerdict ? "Guilty" : "Not Guilty"}
                                    </div>
                                </div>
                                <div>
                                    <div className="text-xs uppercase text-stone-500 font-bold">Accuracy</div>
                                    <div className="font-bold text-lg">
                                        {userAgreesWithHistory ? "Match (+1 Pt)" : "Dissent"}
                                    </div>
                                </div>
                            </div>

                            <button 
                                onClick={handleNextCase}
                                className="mt-4 bg-stone-900 text-white px-8 py-4 text-xl font-bold uppercase hover:bg-stone-700 transition shadow-lg w-full font-cinzel"
                            >
                                {currentScenarioIndex < scenarios.length - 1 ? "Next Case File" : "Final Evaluation"}
                            </button>
                        </div>
                    </div>
                );
            };

            const LevelUp = () => (
                <div className="min-h-screen flex items-center justify-center p-4 bg-wood font-courier text-stone-900">
                    <div className="vintage-paper max-w-4xl w-full p-8 md:p-10 text-center shadow-2xl border-8 border-double border-stone-800">
                        <h1 className="font-playfair text-4xl mb-2">Judicial Tenure Complete</h1>
                        <div className="w-24 h-1 bg-black mx-auto mb-6"></div>
                        
                        <div className="flex justify-center mb-8">
                            <div className="bg-stone-200 p-6 shadow-inner border border-stone-400 w-full max-w-lg">
                                <label className="block text-sm uppercase font-bold text-stone-700 mb-4">
                                    Student Judgment: How much freedom was lost?
                                </label>
                                <div className="flex items-center gap-4">
                                    <span className="font-bold text-stone-500">0%</span>
                                    <input 
                                        type="range" 
                                        min="0" 
                                        max="100" 
                                        value={userFreedomLost} 
                                        onChange={(e) => setUserFreedomLost(e.target.value)}
                                        className="w-full cursor-pointer" 
                                    />
                                    <span className="font-bold text-stone-500">100%</span>
                                </div>
                                <div className="text-center mt-2 font-playfair font-black text-4xl text-red-900">
                                    {userFreedomLost}% <span className="text-lg text-stone-600 font-normal">LOST</span>
                                </div>
                            </div>
                        </div>

                        <div className="grid md:grid-cols-2 gap-8 text-left mb-8 items-start">
                            <div className="flex flex-col items-center justify-center bg-white p-2 border border-stone-300 shadow-sm transform -rotate-1 h-full">
                                <div className="w-full h-[600px] relative overflow-hidden bg-stone-200">
                                    <img src="Liberty1.jpg" alt="Liberty" className="w-full h-full object-cover sepia" />
                                </div>
                                <span className="text-xs font-handwriting text-stone-500 mt-2">Exhibit: The Cost of Liberty</span>
                            </div>
                            <div>
                                <h3 className="font-bold uppercase text-sm mb-2 text-stone-700">Final Judicial Reflection</h3>
                                <p className="text-sm mb-3 italic text-stone-600 font-serif leading-relaxed">
                                    Is the government justified in restricting civil liberties like speech, in the name of security, during times of war? Support your argument.
                                </p>
                                <textarea 
                                    value={finalReflection}
                                    onChange={(e) => setFinalReflection(e.target.value)}
                                    className="w-full h-64 p-4 bg-[#fffdf0] border-2 border-stone-400 font-serif text-lg leading-relaxed shadow-inner focus:outline-none focus:border-black"
                                    placeholder="Write your final reflection here..."
                                ></textarea>
                                <div className="mt-2 text-xs font-bold text-red-800 bg-red-100 p-2 border border-red-200 text-center">
                                    ⚠ INSTRUCTION: Take a screenshot of this reflection and submit it to Schoology.
                                </div>
                            </div>
                        </div>

                        <button 
                            onClick={() => window.location.reload()}
                            className="text-sm font-bold uppercase underline hover:text-red-800 cursor-pointer"
                        >
                            Review Cases Again
                        </button>
                    </div>
                </div>
            );

            return (
                <div>
                    {phase === 'newspaper' && <Newspaper />}
                    {phase === 'intro' && <Intro />}
                    {phase === 'game' && <GameScreen />}
                    {phase === 'result' && <ResultScreen />}
                    {phase === 'levelup' && <LevelUp />}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
